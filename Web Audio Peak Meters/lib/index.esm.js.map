{"version":3,"file":"index.esm.js","sources":["../src/config.ts","../src/utils.ts","../src/markup.ts","../src/index.ts"],"sourcesContent":[null,null,null,null],"names":["defaultConfig","vertical","borderSize","fontSize","backgroundColor","tickColor","labelColor","gradient","dbRangeMin","dbRangeMax","dbTickSize","maskTransition","audioMeterStandard","peakHoldDuration","dbFromFloat","floatVal","x","y","Math","log","verticalLabelHeight","createTicks","parent","config","ticks","min","max","tickSize","i","floor","push","dbTicks","ticksDiv","document","createElement","style","position","height","width","marginTop","marginRight","appendChild","map","t","tickDiv","color","textContent","toString","percentInRange","top","right","textAlign","transform","WebAudioPeakMeter","constructor","src","ele","options","this","srcNode","Object","assign","channelCount","tempPeaks","Array","fill","heldPeaks","peakHoldTimeouts","meterElement","boxSizing","padding","display","flexDirection","createContainerDiv","channelElements","outerDiv","justifyContent","totalBorder","from","keys","channelDiv","createChannelElements","peakLabels","parents","label","alignItems","createPeakLabels","bars","barDiv","transition","backgroundImage","join","createBars","addEventListener","clearPeaks","bind","paintMeter","initNode","node","AudioWorkletNode","context","parameterData","err","blob","Blob","type","objectURL","URL","createObjectURL","audioWorklet","addModule","port","onmessage","ev","handleNodePortMessage","connect","destination","data","console","message","peaks","length","clearTimeout","window","setTimeout","clearPeak","forEach","clipPath","db","clipPercent","audioClipPath","textLabel","heldPeak","toFixed","animationRequestId","requestAnimationFrame","getPeaks","current","maxes","currentDB","maxesDB","cleanup","disconnect","removeEventListener","undefined","cancelAnimationFrame","remove"],"mappings":"AAgBO,MAAMA,EAAiC,CAC5CC,UAAU,EACVC,WAAY,EACZC,SAAU,EACVC,gBAAiB,QACjBC,UAAW,OACXC,WAAY,OACZC,SAAU,CAAC,SAAU,WAAY,WAAY,aAC7CC,YAAa,GACbC,WAAY,EACZC,WAAY,EACZC,eAAgB,OAChBC,mBAAoB,cACpBC,iBAAkB,GCzBd,SAAUC,EAAYC,GAC1B,OAAkC,IALTC,EAKP,GALkBC,EAKdF,EAJfG,KAAKC,IAAIF,GAAKC,KAAKC,IAAIH,IADhB,IAAWA,EAAWC,CAMtC,CCHA,MACMG,EAAsB,IAsCZ,SAAAC,EAAYC,EAAqBC,GAC/C,MAAMf,WAAEA,EAAUC,WAAEA,EAAUC,WAAEA,EAAUP,SAAEA,EAAQD,WAAEA,EAAUG,UAAEA,EAASJ,SAAEA,GAAasB,EACpFC,WD/BgBC,EAAaC,EAAaC,GAChD,MAAMH,EAAQ,GACd,IAAK,IAAII,EAAIV,KAAKW,MAAMJ,GAAO,EAAGG,GAAKF,EAAKE,GAAK,EAC3CA,EAAID,GAAa,GACnBH,EAAMM,KAAKF,GAGf,OAAOJ,CACT,CCuBgBO,CAAQvB,EAAYC,EAAYC,GACxCsB,EAAWC,SAASC,cAAc,OACxCF,EAASG,MAAMC,SAAW,WACtBnC,GACF+B,EAASG,MAAME,OAAS,eAAelC,EAAWiB,OAClDY,EAASG,MAAMG,MA3CO,EA2CInC,EAAH,KACvB6B,EAASG,MAAMI,UAAepC,EAAWiB,EAAd,OAE3BY,EAASG,MAAME,OA/CU,IA+CElC,EAAH,KACxB6B,EAASG,MAAMG,MAAQ,eAlDE,EAkDanC,OACtC6B,EAASG,MAAMK,YAnDU,EAmDOrC,EAAH,MAE/BmB,EAAOmB,YAAYT,GAmBnB,OAlBiBR,EAAMkB,KAAKC,IAC1B,MAAMC,EAAUX,SAASC,cAAc,OACvCF,EAASS,YAAYG,GACrBA,EAAQT,MAAMC,SAAW,WACzBQ,EAAQT,MAAMU,MAAQxC,EACtBuC,EAAQT,MAAMhC,SAAW,GAAGA,MAC5ByC,EAAQE,YAAcH,EAAEI,WACxB,MAAMC,GAAmBvC,EAAakC,IAAMlC,EAAaD,GAAe,IASxE,OARIP,GACF2C,EAAQT,MAAMc,IAAM,QAAQD,QAAqB7C,EAAW,OAC5DyC,EAAQT,MAAMe,MAAQ,GAAGhD,MACzB0C,EAAQT,MAAMgB,UAAY,UAE1BP,EAAQT,MAAMe,MAAQ,GAAGF,KACzBJ,EAAQT,MAAMiB,UAAY,mBAErBR,CAAO,GAGlB,OC/DaS,EAeX,WAAAC,CAAYC,EAAgBC,EAAkBC,EAAU,CAAA,GACtDC,KAAKC,QAAUJ,EACfG,KAAKnC,OAASqC,OAAOC,OAAMD,OAAAC,OAAA,GAAM7D,GAAiByD,GAClDC,KAAKI,aAAeP,EAAIO,aACxBJ,KAAKK,UAAY,IAAIC,MAAMN,KAAKI,cAAcG,KAAK,GACnDP,KAAKQ,UAAY,IAAIF,MAAMN,KAAKI,cAAcG,KAAK,GACnDP,KAAKS,iBAAmB,IAAIH,MAAMN,KAAKI,cAAcG,KAAK,GACtDT,IACFE,KAAKpC,ODTK,SAAmBA,EAAqBC,GACtD,MAAMnB,gBAAEA,EAAeF,WAAEA,EAAUD,SAAEA,GAAasB,EAC5C6C,EAAenC,SAASC,cAAc,OAU5C,OATAkC,EAAajC,MAAM/B,gBAAkBA,EACrCgE,EAAajC,MAAMkC,UAAY,aAC/BD,EAAajC,MAAME,OAAS,OAC5B+B,EAAajC,MAAMmC,QAAU,GAAGpE,MAC5BD,IACFmE,EAAajC,MAAMoC,QAAU,OAC7BH,EAAajC,MAAMqC,cAAgB,eAErClD,EAAOmB,YAAY2B,GACZA,CACT,CCJoBK,CAAmBjB,EAAKE,KAAKnC,QAC3CmC,KAAKgB,yBD0CTpD,EACAC,EACAuC,GAEA,MAAM3D,SAAEA,EAAQF,SAAEA,EAAQC,WAAEA,GAAeqB,EACrCoD,EAAW1C,SAASC,cAAc,OACxCyC,EAASxC,MAAMoC,QAAU,OACzBI,EAASxC,MAAMyC,eAAiB,gBAC5B3E,GACF0E,EAASxC,MAAME,OAAS,OACxBsC,EAASxC,MAAMG,MAAQ,eAnFD,EAmFgBnC,SAEtCwE,EAASxC,MAAME,OAAS,eAtFC,IAsFclC,OACvCwE,EAASxC,MAAMG,MAAQ,OACvBqC,EAASxC,MAAMqC,cAAgB,UAEjClD,EAAOmB,YAAYkC,GACnB,MAAME,GAAef,EAAe,GAAK5D,EAezC,OAdoB8D,MAAMc,KAAKd,MAAMF,GAAciB,QAAQrC,KAAI,KAC7D,MAAMsC,EAAa/C,SAASC,cAAc,OAW1C,OAVIjC,GACF+E,EAAW7C,MAAME,OAAS,OAC1B2C,EAAW7C,MAAMG,MAAQ,gBAAgBuC,UAAoBf,OAE7DkB,EAAW7C,MAAMoC,QAAU,OAC3BS,EAAW7C,MAAME,OAAS,gBAAgBwC,UAAoBf,KAC9DkB,EAAW7C,MAAMG,MAAQ,OACzB0C,EAAW7C,MAAMqC,cAAgB,eAEnCG,EAASlC,YAAYuC,GACdA,CAAU,GAGrB,CC3E6BC,CAAsBvB,KAAKpC,OAAQoC,KAAKnC,OAAQmC,KAAKI,cAC5EJ,KAAKwB,WD4EK,SACdC,EACA5D,GAEA,MAAMjB,WAAEA,EAAUH,SAAEA,EAAQF,SAAEA,GAAasB,EAsB3C,OArBkB4D,EAAQzC,KAAKpB,IAC7B,MAAM8D,EAAQnD,SAASC,cAAc,OAkBrC,OAhBAkD,EAAMjD,MAAMU,MAAQvC,EACpB8E,EAAMjD,MAAMhC,SAAW,GAAGA,MAC1BiF,EAAMtC,YAAc,KAChB7C,GACFmF,EAAMjD,MAAME,OAAYlC,EAAWiB,EAAd,KACrBgE,EAAMjD,MAAMG,MAAQ,OACpB8C,EAAMjD,MAAMgB,UAAY,WAGxBiC,EAAMjD,MAAMG,MAhIW,EAgIAnC,EAAH,KAEpBiF,EAAMjD,MAAMoC,QAAU,OACtBa,EAAMjD,MAAMyC,eAAiB,SAC7BQ,EAAMjD,MAAMkD,WAAa,UAE3B/D,EAAOmB,YAAY2C,GACZA,CAAK,GAGhB,CCvGwBE,CAAiB5B,KAAKgB,gBAAiBhB,KAAKnC,QAC9DmC,KAAK6B,KDwGK,SAAWJ,EAAwB5D,GACjD,MAAMhB,SAAEA,EAAQN,SAAEA,EAAQE,SAAEA,EAAQQ,eAAEA,GAAmBY,EAkBzD,OAhBgB4D,EAAQzC,KAAKpB,IAC3B,MAAMkE,EAASvD,SAASC,cAAc,OAatC,OAZAsD,EAAOrD,MAAMsD,WAAa,aAAa9E,IACnCV,GACFuF,EAAOrD,MAAME,OAAS,eAAelC,EAAWiB,OAChDoE,EAAOrD,MAAMG,MAAQ,OACrBkD,EAAOrD,MAAMuD,gBAAkB,8BAA8BnF,EAASoF,KAAK,WAE3EH,EAAOrD,MAAME,OAAS,OAEtBmD,EAAOrD,MAAMG,MAAQ,eAzJE,EAyJanC,OACpCqF,EAAOrD,MAAMuD,gBAAkB,4BAA4BnF,EAASoF,KAAK,UAE3ErE,EAAOmB,YAAY+C,GACZA,CAAM,GAGjB,CC5HkBI,CAAWlC,KAAKgB,gBAAiBhB,KAAKnC,QAClDmC,KAAKlC,MAAQH,EAAYqC,KAAKpC,OAAQoC,KAAKnC,QAC3CmC,KAAKpC,OAAOuE,iBAAiB,QAASnC,KAAKoC,WAAWC,KAAKrC,OAC3DA,KAAKsC,cAEPtC,KAAKuC,UACN,CAED,cAAMA,GACJ,MAAMrF,mBAAEA,GAAuB8C,KAAKnC,OACpC,IACEmC,KAAKwC,KAAO,IAAIC,iBAAiBzC,KAAKC,QAAQyC,QAAS,GAAGxF,cAAgC,CACxFyF,cAAe,CAAE,GAEpB,CAAC,MAAOC,GACP,MAEMC,EAAO,IAAIC,KAAK,CADG,cAAvB5F,u2DACqC,CAAE6F,KAAM,2BACzCC,EAAYC,IAAIC,gBAAgBL,SAChC7C,KAAKC,QAAQyC,QAAQS,aAAaC,UAAUJ,GAClDhD,KAAKwC,KAAO,IAAIC,iBAAiBzC,KAAKC,QAAQyC,QAAS,GAAGxF,cAAgC,CACxFyF,cAAe,CAAE,GAEpB,CACD3C,KAAKwC,KAAKa,KAAKC,UAAaC,GAAqBvD,KAAKwD,sBAAsBD,GAC5EvD,KAAKC,QAAQwD,QAAQzD,KAAKwC,MAAMiB,QAAQzD,KAAKC,QAAQyC,QAAQgB,YAC9D,CAED,qBAAAF,CAAsBD,GAIpB,GAHqB,YAAjBA,EAAGI,KAAKZ,MACVa,QAAQnG,IAAI8F,EAAGI,KAAKE,SAED,UAAjBN,EAAGI,KAAKZ,KAAkB,CAC5B,MAAMe,MAAEA,GAAUP,EAAGI,KACrB,IAAK,IAAIzF,EAAI,EAAGA,EAAI8B,KAAKK,UAAU0D,OAAQ7F,GAAK,EAC1C4F,EAAMC,OAAS7F,EACjB8B,KAAKK,UAAUnC,GAAK4F,EAAM5F,GAE1B8B,KAAKK,UAAUnC,GAAK,EAGpB4F,EAAMC,OAAS/D,KAAKI,cACtBJ,KAAKK,UAAUE,KAAK,EAAKuD,EAAMC,QAEjC,IAAK,IAAI7F,EAAI,EAAGA,EAAI4F,EAAMC,OAAQ7F,GAAK,EACjC4F,EAAM5F,GAAK8B,KAAKQ,UAAUtC,KAC5B8B,KAAKQ,UAAUtC,GAAK4F,EAAM5F,GACtB8B,KAAKS,iBAAiBvC,IACxB8F,aAAahE,KAAKS,iBAAiBvC,IAEjC8B,KAAKnC,OAAOV,mBACd6C,KAAKS,iBAAiBvC,GAAK+F,OAAOC,YAAW,KAC3ClE,KAAKmE,UAAUjG,EAAE,GAChB8B,KAAKnC,OAAOV,mBAItB,CACF,CAED,UAAAmF,GACE,MAAMxF,WAAEA,EAAUC,WAAEA,EAAUR,SAAEA,GAAayD,KAAKnC,OAC9CmC,KAAK6B,MACP7B,KAAK6B,KAAKuC,SAAQ,CAACtC,EAAQ5D,KACzB,MACMmG,EDhGR,SACJC,EACAxH,EACAC,EACAR,GAEA,IAAIgI,EAAc/G,KAAKW,MAA2B,KAAnBpB,EAAauH,IAAcvH,EAAaD,IAOvE,OANIyH,EAAc,MAChBA,EAAc,KAEZA,EAAc,IAChBA,EAAc,GAEZhI,EACK,SAASgI,UAEX,WAAWA,SACpB,CC+EyBC,CADApH,EAAY4C,KAAKK,UAAUnC,IACHpB,EAAYC,EAAYR,GACjEuF,EAAOrD,MAAM4F,SAAWA,CAAQ,IAGhCrE,KAAKwB,YACPxB,KAAKwB,WAAW4C,SAAQ,CAACK,EAAWvG,KAClC,GAA0B,IAAtB8B,KAAKQ,UAAUtC,GACjBuG,EAAUrF,YAAc,SACnB,CACL,MAAMsF,EAAWtH,EAAY4C,KAAKQ,UAAUtC,IAC5CuG,EAAUrF,YAAcsF,EAASC,QAAQ,EAC1C,KAGL3E,KAAK4E,mBAAqBX,OAAOY,sBAAsB7E,KAAKsC,WAAWD,KAAKrC,MAC7E,CAED,SAAAmE,CAAUjG,GACR8B,KAAKQ,UAAUtC,GAAK8B,KAAKK,UAAUnC,EACpC,CAED,UAAAkE,GACE,IAAK,IAAIlE,EAAI,EAAGA,EAAI8B,KAAKQ,UAAUuD,OAAQ7F,GAAK,EAC9C8B,KAAKmE,UAAUjG,EAElB,CAED,QAAA4G,GACE,MAAO,CACLC,QAAS/E,KAAKK,UACd2E,MAAOhF,KAAKQ,UACZyE,UAAWjF,KAAKK,UAAUrB,IAAI5B,GAC9B8H,QAASlF,KAAKQ,UAAUxB,IAAI5B,GAE/B,CAED,OAAA+H,GACMnF,KAAKwC,MACPxC,KAAKwC,KAAK4C,aAERpF,KAAKpC,SACPoC,KAAKpC,OAAOyH,oBAAoB,QAASrF,KAAKoC,WAAWC,KAAKrC,YAC9BsF,IAA5BtF,KAAK4E,oBACPX,OAAOsB,qBAAqBvF,KAAK4E,oBAEnC5E,KAAKpC,OAAO4H,SAEf"}